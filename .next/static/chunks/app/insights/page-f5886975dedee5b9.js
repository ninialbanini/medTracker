(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{1779:(e,s,t)=>{Promise.resolve().then(t.bind(t,2159))},2159:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(5155),r=t(2115),n=t(5695);function i(){(0,n.useRouter)();let e=(0,n.useSearchParams)(),s=e.get("medicine"),t=e.get("dosage"),[i,l]=(0,r.useState)([]),[c,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{{let e=localStorage.getItem("logs");e&&l(JSON.parse(e))}},[]),(0,r.useEffect)(()=>{localStorage.setItem("logs",JSON.stringify(i))},[i]);let h=async()=>{let e=i.map(e=>e.symptoms).join("\n");try{let a=await fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({medicineName:s,dosage:t,notes:e})});if(!a.ok)throw Error("Failed to fetch insights");let r=await a.json();o(r.insights)}catch(e){console.error("Error fetching insights:",e),o(["There was an error generating insights. Please try again later."])}};return(0,a.jsx)("div",{className:"min-h-screen p-8 pb-20",children:(0,a.jsxs)("main",{className:"flex flex-col items-center",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold mb-4",children:["Insights for ",s," - ",t]}),(0,a.jsx)("button",{onClick:h,className:"bg-blue-500 text-white p-2 mb-4",children:"Generate Insights"}),(0,a.jsx)("ul",{className:"list-disc",children:c.length>0?c.map((e,s)=>(0,a.jsx)("li",{className:"mb-2",children:e},s)):(0,a.jsx)("p",{children:"No insights available. Click the button to generate insights."})})]})})}function l(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(i,{})})}},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(1779)),_N_E=e.O()}]);